<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.asapro.emailTargetInfo.service.EmailTargetInfoMapper">
	
	<resultMap type="EmailTargetInfo" id="emailTargetInfoPlainResultMap">
		<id column="ET_ID" property="etId" javaType="String" />
		<result column="ET_CATE" property="etCate" javaType="String" />
		<result column="ET_TITLE" property="etTitle" javaType="String" />	
		<result column="ET_TARGET" property="etTarget" javaType="String" />
		<result column="ET_CONTENTS" property="etContents" javaType="String" />
		<result column="ET_FORM" property="etForm" javaType="String" />
		<result column="ET_REGDATE" property="etRegDate" javaType="Date" />	
	</resultMap>
	
	<sql id="emailTargetInfoPlainColumns">
		ET_ID
		, ET_CATE
		, ET_TITLE
		, ET_TARGET
		, ET_CONTENTS
		, ET_FORM
		, ET_REGDATE
	</sql>
	
	<select id="selectEmailTargetInfoList" parameterType="EmailTargetInfoSearch" resultMap="emailTargetInfoPlainResultMap">
		SELECT 
			<include refid="emailTargetInfoPlainColumns"/>
		FROM ASA_EMAIL_TARGET
		<where>
			<if test="sv != null and sv != ''">
				<if test="sc == null or sc == ''">
					AND (
						ET_TITLE LIKE CONCAT('%',#{sv},'%')
						<!-- OR ET_CONTENTS LIKE CONCAT('%',#{sv},'%') -->
					)
				</if>
				<if test="sc != null and sc != ''">
					AND ${sc} LIKE CONCAT('%',#{sv},'%')
				</if>
			</if>
		</where>
		<if test="sortOrder != null and sortOrder != '' and sortDirection != null and sortDirection != ''">
			ORDER BY ${sortOrder} ${sortDirection}
		</if>
		<if test="sortOrder == null or sortOrder == '' or sortDirection == null or sortDirection == ''">
			ORDER BY ET_REGDATE DESC
		</if> 
		<if test="paging">
		LIMIT ${pageSize} OFFSET #{offset}
		</if>
	</select>
	
	<select id="selectEmailTargetInfoListTotal" parameterType="EmailTargetInfoSearch" resultType="Integer">
		SELECT 
			COUNT(*)
		FROM ASA_EMAIL_TARGET
		<where>
			<if test="sv != null and sv != ''">
				<if test="sc == null or sc == ''">
					AND (
						ET_TITLE LIKE CONCAT('%',#{sv},'%')
						<!-- OR ET_CONTENTS LIKE CONCAT('%',#{sv},'%') -->
					)
				</if>
				<if test="sc != null and sc != ''">
					AND ${sc} LIKE CONCAT('%',#{sv},'%')
				</if>
			</if>
		</where>
	</select>
	
	<select id="selectEmailTargetInfo" parameterType="EmailTargetInfo" resultMap="emailTargetInfoPlainResultMap">
		SELECT 
			<include refid="emailTargetInfoPlainColumns"/>
		FROM ASA_EMAIL_TARGET
		<where>
			ET_ID = #{etId}
		</where>
	</select>
	
	<insert id="insertEmailTargetInfo" parameterType="EmailTargetInfo">
		INSERT INTO ASA_EMAIL_TARGET (
			<include refid="emailTargetInfoPlainColumns"/>
		) VALUES (
			#{etId}
			, #{etCate}
			, #{etTitle}
			, #{etTarget}
			, #{etContents}
			, #{etForm}
			, #{etRegDate}
		)
	</insert>
	
	<update id="updateEmailTargetInfo" parameterType="EmailTargetInfo">
		UPDATE ASA_EMAIL_TARGET SET
			ET_CATE				= #{etCate}
			, ET_TITLE			= #{etTitle}
			, ET_TARGET			= #{etTarget}
			, ET_CONTENTS		= #{etContents}
			, ET_FORM			= #{etForm}
		<where>
			ET_ID = #{etId}
		</where>
	</update>
	
	<delete id="deleteEmailTargetInfo" parameterType="EmailTargetInfo">
		DELETE FROM ASA_EMAIL_TARGET
		<where>
			ET_ID = #{etId}
		</where>
	</delete>
	
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.com.campustown.application.service.XTechApplyMapper">

    <resultMap type="XTechApply" id="XTechApplyMap">
        <id column="APPLY_SEQ"							property="applySeq"		   				javaType="Integer" />
        <result column="APPLY_REG_ID"					property="applyRegId"		  			javaType="String" />
        <result column="APPLY_REG_DATE"					property="applyRegDate"		  			javaType="Date" />
        <result column="APPLY_ITEM_NAME"				property="itemName"		 		        javaType="String" />
        <result column="APPLY_JOIN_GUBUN"				property="joinGubun"		  		    javaType="String" />
        <result column="APPLY_COMPANY_NAME"				property="companyName"		  		    javaType="String" />
        <result column="APPLY_SET_UP_DATE"				property="setUpDate"					javaType="String" />
        <result column="APPLY_COMPANY_PHONE_NUM"		property="companyPhoneNum"				javaType="String" />
		<result column="APPLY_COMPANY_LICENSE"			property="companyLicense"				javaType="String" />
        <result column="APPLY_ADDR"					    property="companyAddr"			        javaType="String" />
        <result column="APPLY_OWNER_NAME"				property="ownerName"					javaType="String" />
        <result column="APPLY_OWNER_PHONE_NUM"			property="ownerPhoneNum"		    	javaType="String" />
        <result column="APPLY_OWNER_BIRTH"				property="ownerBirth"					javaType="String" />
        <result column="APPLY_OWNER_EMAIL"				property="ownerEmail"					javaType="String" />
        <result column="APPLY_OWNER_ADDR"				property="ownerAddr"					javaType="String" />
        <result column="APPLY_MEM_NAME"					property="memNameStr"				        javaType="String" />
        <result column="APPLY_MEM_BIRTH"				property="memBirthStr"					    javaType="String" />
        <result column="APPLY_MEM_COMPANY"				property="memCompanyStr"					javaType="String" />
        <result column="APPLY_MEM_POSITION"				property="memPositionStr"					javaType="String" />
        <result column="APPLY_MEM_PHONE_NUM"			property="memPhoneNumStr"			    	javaType="String" />
        <result column="APPLY_MEM_EMAIL"				property="memEmailStr"					    javaType="String" />
        <result column="APPLY_ROOT"				    	property="applyRoot"			        javaType="String" />
        <result column="APPLY_SPACE"					property="space"				        javaType="String" />
    </resultMap>

    <insert id="insertXTechApply" parameterType="XTechApply">
        <selectKey keyProperty="applySeq" order="BEFORE" resultType="Integer">
            SELECT APPLY_SEQ.NEXTVAL FROM DUAL
        </selectKey>
		INSERT INTO X_TECH_APPLY
			(APPLY_SEQ,
			APPLY_REG_ID,
			APPLY_ITEM_NAME,
			APPLY_JOIN_GUBUN,
			APPLY_COMPANY_NAME,
			APPLY_COMPANY_LICENSE,
			APPLY_SET_UP_DATE,
			APPLY_COMPANY_PHONE_NUM,
			APPLY_ADDR,
			APPLY_OWNER_NAME,
			APPLY_OWNER_PHONE_NUM,
			APPLY_OWNER_BIRTH,
			APPLY_OWNER_EMAIL,
			APPLY_OWNER_ADDR,
			APPLY_MEM_NAME,
			APPLY_MEM_BIRTH,
			APPLY_MEM_COMPANY,
			APPLY_MEM_POSITION,
			APPLY_MEM_PHONE_NUM,
			APPLY_MEM_EMAIL,
            APPLY_ROOT,
            APPLY_SPACE)
		VALUES (
		    #{applySeq},
		    #{applyRegId},
		    #{itemName},
		    #{joinGubun},
		    #{companyName},
			#{companyLicense},
		    #{setUpDate},
		    #{companyPhoneNum},
		    #{companyAddr},
		    #{ownerName},
		    #{ownerPhoneNum},
		    #{ownerBirth},
		    #{ownerEmail},
		    #{ownerAddr},
		    #{memNameStr},
		    #{memBirthStr},
		    #{memCompanyStr},
		    #{memPositionStr},
		    #{memPhoneNumStr},
            #{memEmailStr},
            #{applyRoot},
            #{space})
	</insert>

	<update id="updateXTechApply" parameterType="XTechApply">
		UPDATE X_TECH_APPLY SET
			APPLY_ITEM_NAME = #{itemName},
			APPLY_JOIN_GUBUN = #{joinGubun},
			APPLY_COMPANY_NAME = #{companyName},
			APPLY_COMPANY_LICENSE = #{companyLicense},
			APPLY_SET_UP_DATE = #{setUpDate},
			APPLY_COMPANY_PHONE_NUM = #{companyPhoneNum},
			APPLY_ADDR = #{companyAddr},
			APPLY_OWNER_NAME = #{ownerName},
			APPLY_OWNER_PHONE_NUM = #{ownerPhoneNum},
			APPLY_OWNER_BIRTH = #{ownerBirth},
			APPLY_OWNER_EMAIL = #{ownerEmail},
			APPLY_OWNER_ADDR = #{ownerAddr},
			APPLY_MEM_NAME = #{memNameStr},
			APPLY_MEM_BIRTH = #{memBirthStr},
			APPLY_MEM_COMPANY = #{memCompanyStr},
			APPLY_MEM_POSITION = #{memPositionStr},
			APPLY_MEM_PHONE_NUM = #{memPhoneNumStr},
			APPLY_MEM_EMAIL = #{memEmailStr},
			APPLY_ROOT = #{applyRoot},
			APPLY_SPACE = #{space}
		<where>
			APPLY_SEQ = #{applySeq}
		</where>
	</update>



	<sql id="XTechApplyColumns">
		APPLY_SEQ,
		APPLY_REG_ID,
		APPLY_REG_DATE,
		APPLY_ITEM_NAME,
		APPLY_JOIN_GUBUN,
		APPLY_COMPANY_NAME,
		APPLY_COMPANY_LICENSE,
		APPLY_SET_UP_DATE,
		APPLY_COMPANY_PHONE_NUM,
		APPLY_ADDR,
		APPLY_OWNER_NAME,
		APPLY_OWNER_PHONE_NUM,
		APPLY_OWNER_BIRTH,
		APPLY_OWNER_EMAIL,
		APPLY_OWNER_ADDR,
		APPLY_MEM_NAME,
		APPLY_MEM_BIRTH,
		APPLY_MEM_COMPANY,
		APPLY_MEM_POSITION,
		APPLY_MEM_PHONE_NUM,
		APPLY_MEM_EMAIL,
		APPLY_ROOT,
		APPLY_SPACE
	</sql>

	<select id="getXTechApply" parameterType="Integer" resultMap="XTechApplyMap">
		SELECT
		<include refid="XTechApplyColumns" />
		FROM X_TECH_APPLY
		WHERE APPLY_SEQ = #{applySeq}
	</select>

	<select id="getXTechApplyList" parameterType="XTechApply" resultMap="XTechApplyMap">
		<if test="paging">
			SELECT * FROM(
			SELECT ROWNUM RN, Z.* FROM(
		</if>
		SELECT
		<include refid="XTechApplyColumns" />
		FROM X_TECH_APPLY
		<where>
			<if test="sv != null and sv != ''">
				<if test="sc == null or sc == ''">
					AND (
					APPLY_COMPANY_NAME LIKE '%'||#{sv}||'%'
					)
				</if>
				<if test="sc != null and sc != ''">
					AND ${sc} LIKE '%'||#{sv}||'%'
				</if>
			</if>
		</where>
		<if test="sortOrder != null and sortOrder != '' and sortDirection != null and sortDirection != ''">
			ORDER BY ${sortOrder} ${sortDirection}
		</if>
		<if test="sortOrder == null or sortOrder == '' or sortDirection == null or sortDirection == ''">
			ORDER BY APPLY_SEQ ASC
		</if>
		<if test="paging">
			) Z
			)
			<where>
				RN BETWEEN #{startRow} AND #{endRow}
			</where>
		</if>
	</select>

	<select id="getXTechApplyListTotal" parameterType="XTechApply" resultType="Integer">
		SELECT
		COUNT(*)
		FROM X_TECH_APPLY
		<where>
			<if test="sv != null and sv != ''">
				<if test="sc == null or sc == ''">
					AND (
					APPLY_COMPANY_NAME LIKE '%'||#{sv}||'%'
					)
				</if>
				<if test="sc != null and sc != ''">
					AND ${sc} LIKE '%'||#{sv}||'%'
				</if>
			</if>
		</where>
	</select>

	<delete id="deleteArchive" parameterType="XTechApply">
		DELETE FROM X_TECH_APPLY
		<where>
			APPLY_SEQ	=	#{applySeq}
		</where>
	</delete>
</mapper>
